{"version":3,"file":"resource-provider.js","sourceRoot":"","sources":["resource-provider.ts"],"names":[],"mappings":"OAAO,EAAO,WAAW,EAAC,MAAM,eAAe;OAExC,EAAC,kBAAkB,EAAC,MAAM,yBAAyB;AAE1D,IAAI,aAAa,GAAG,CAAC,CAAC;AAEtB;;;;;;GAMG;AACH,gCAAgC,EAQ/B;QARgC,oBAAO,EAAE,sBAAQ,EAAE,sBAAQ,EAAE,4BAAW,EAAE,0BAAU,EAAE,cAAI;IAUvF,IAAM,KAAK,GAAG,OAAO,IAAI,IAAI,WAAW,CAAC,UAAU,GAAG,EAAE,aAAa,CAAC,CAAC;IAEvE,MAAM,CAAC;QACH;YACI,OAAO,EAAE,KAAK;YACd,kBAAQ;YACR,kBAAQ;YACR,wBAAW;YACX,sBAAU;YACV,UAAI;SACP;QACD,kBAAkB,CAAC;YACf,UAAU,EAAE,UAAC,QAAkB,IAAK,OAAA,QAAQ,CAAC,UAAU,EAAnB,CAAmB;YACvD,IAAI,EAAE,CAAC,KAAK,CAAC;SAChB,CAAC;KACL,CAAC;AACN,CAAC","sourcesContent":["import {Type, OpaqueToken} from \"@angular/core\";\nimport {Resource} from \"./resource\";\nimport {provideEventSource} from \"./event-source-provider\";\n\nvar resourceIdSeq = 0;\n\n/**\n * Constructs provider recipe for {{Resource}}.\n *\n * Also registers the resource as source of Rike operation events.\n *\n * @return new provider recipe.\n */\nexport function provideResource({provide, useClass, useValue, useExisting, useFactory, deps}: {\n    provide?: any,\n    useClass?: Type<any>;\n    useValue?: any;\n    useExisting?: any;\n    useFactory?: Function;\n    deps?: Object[];\n    multi?: boolean;\n}): any {\n\n    const token = provide || new OpaqueToken(\"resource\" + ++resourceIdSeq);\n\n    return [\n        {\n            provide: token,\n            useClass,\n            useValue,\n            useExisting,\n            useFactory,\n            deps,\n        },\n        provideEventSource({\n            useFactory: (resource: Resource) => resource.rikeTarget,\n            deps: [token],\n        })\n    ];\n}\n"]}